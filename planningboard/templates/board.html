<!DOCTYPE html>
<html lang="en">
    <head>
        {%load static %}
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="">
        <meta name="author" content="">
        <title>Система планирования</title>
        <link rel="stylesheet" type="text/css" href="{% static 'bootstrap/css/bootstrap.min.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'icons/font/bootstrap-icons.css' %}">
        <link rel="stylesheet" type="text/css" href="{% static 'gridstrap/jquery.gridstrap.css' %}">  
        <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
    </head>
    <body>
        <div style="display: flex; flex-direction: column; height: 100vh;">
          
        <div class="offcanvas offcanvas-end"data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="offcanvasScrolling" aria-labelledby="offcanvasScrollingLabel">
            <div class="offcanvas-header bg-dark bg-gradient text-white">
                <h5 class="offcanvas-title fs-1" id="offcanvasExampleLabel">Мессенджер</h5>
                <button type="button" class="btn btn-outline-light m-1" data-bs-dismiss="offcanvas" aria-label="Close"><i class="bi-x-square-fill fs-5"></i></button>
            </div>

            <div class="offcanvas-body border border-dark border-2">

                <h3 class="offcanvas-title bg-dark bg-gradient text-white border border-secondary" id="offcanvasExampleLabel"><i class="bi-person-badge-fill fs-3 mx-1"></i>Иван Иваныч Иваненко</h3>
                
                <div class="">
                    <div class="border border-secondary bg-warning" style="width: 20%; float: right; display: flex;">
                        Други
                    </div>
                    <div class="border border-secondary bg-danger" style="width: 80%; float: left; display: flex;">
                        Чат
                    </div>
                </div>

                <div class="bg-info" style="height: 100px; float: inline-end">

                </div>
            </div>
        </div>

        <header>
            <div class="container-fluid px-3 bg-dark bg-gradient text-white">
                <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                    <p class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-white text-decoration-none fs-2"><i class="bi-map-fill px-3"></i>TOGIRRO Board</p>
                    <p class="d-flex align-items-center mx-2 my-2 my-lg-0 me-lg-auto text-white text-decoration-none text-center fs-5">Добро пожаловать, {{ UserName }}!</p>
                    
                    <div class="row justify-content-md-center">
                        {% if RightsLevel == 2 %}
                        <div class="col">
                            <form method="POST" action="">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-outline-light m-1" name="admin">
                                    <div class="col">
                                        <div class="row text-center mx-auto"><i class="bi-tools fs-3"></i></div>
                                        <div class="row text-center mx-auto">Администраторная</div>
                                    </div>
                                </button> 
                            </form>
                        </div>
                        {% endif %}
                        <div class="col">
                            <button type="button" class="btn btn-outline-light m-1" data-bs-toggle="offcanvas" data-bs-target="#offcanvasScrolling" aria-controls="offcanvasScrolling">
                                <div class="col">
                                    <div class="row text-center mx-auto"><i class="bi-chat-right-text-fill fs-3"></i></div>
                                    <div class="row text-center mx-auto">Мессенджер</div>
                                </div>
                            </button> 
                        </div>
                        <div class="col">
                            <button type="button" class="btn btn-outline-light m-1"  id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
                                <div class="col">
                                    <div class="row text-center mx-auto"><i class="bi-person-circle fs-3"></i></div>
                                    <div class="row text-center mx-auto">Аккаунт</div>
                                </div>
                            </button> 
                            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
                                <li><a class="dropdown-item" href="#">Настройки</a></li>
                                <li><form method="POST" action="">{% csrf_token %}<button type="submit" class="dropdown-item" name="logout">Выйти</button></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <form method="POST" action="" class="container-fluid bg-white text-dark border border-3 border-dark">
                <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                    <p class="d-flex align-items-center my-2 my-lg-0 me-lg-auto text-decoration-none fs-4"><i class="bi-person-bounding-box px-2"></i>Сотрудник:</p>
                    
                    {% if RightsLevel > 0 %}
                    <div class="col-sm p-1 mx-2 my-1">
                        {% csrf_token %}
                        <select onChange="form.submit();" class="form-select" name='inferior' aria-label=".form-select-lg example">
                            {% for Inferior in InferiorList %}
                            <option value="{{ Inferior.Position }}" {% if CurInferior == Inferior.Position %}selected{% endif %}>{{ Inferior.Name }}</option>
                            {% endfor %}
                        </select>
                   </div>
                    {% endif %}

                    {% csrf_token %}
                    <input onChange="form.submit();" type="week" name='weekpicker' value='{{ Date }}'>
                    
                </form>
            </div>
        </header>

        <div class="container-fluid">
            <div class="row border border-2 border-dark" style="overflow-y: scroll; overflow-x: hidden; padding-right: 6px; box-sizing: content-box;">
                <div class="col {% if TodayDay == 1 %} bg-warning text-dark {% else %} bg-dark text-white {% endif %} bg-gradient text-center p-1 border border-secondary"><strong>Понедельник</strong></div>
                <div class="col {% if TodayDay == 2 %} bg-warning text-dark {% else %} bg-dark text-white {% endif %} bg-gradient text-center p-1 border border-secondary"><strong>Вторник</strong></div>
                <div class="col {% if TodayDay == 3 %} bg-warning text-dark {% else %} bg-dark text-white {% endif %} bg-gradient text-center p-1 border border-secondary"><strong>Среда</strong></div>
                <div class="col {% if TodayDay == 4 %} bg-warning text-dark {% else %} bg-dark text-white {% endif %} bg-gradient text-center p-1 border border-secondary"><strong>Четверг</strong></div>
                <div class="col {% if TodayDay == 5 %} bg-warning text-dark {% else %} bg-dark text-white {% endif %} bg-gradient text-center p-1 border border-secondary"><strong>Пятница</strong></div>
                <div class="col {% if TodayDay == 6 %} bg-warning text-dark {% else %} bg-dark text-white {% endif %} bg-gradient text-center p-1 border border-secondary"><strong>Суббота</strong></div>
                <div class="col {% if TodayDay == 7 %} bg-warning text-dark {% else %} bg-dark text-white {% endif %} bg-gradient text-center p-1 border border-secondary"><strong>Воскресенье</strong></div>
            </div>
        </div>

        <div class="border border-3 border-dark bg-dark" style="flex-grow: 3; overflow-y: scroll; overflow-x: hidden; padding-left: 12px; padding-right: 17px; box-sizing: content-box;">
            
                <div class="">

                    {% for TaskLine in Tasks %}
                    <div class="row border border-secondary my-1" style="min-height: 200px;">
                        {% for Task in TaskLine %}
                        {% if Task.IsTask == 0 %}
                        <div class="col bg-white p-1" style="min-height: 200px; max-width: calc(100%/7*{{ Task.Size }});">
                            {% if RightsLevel > 0 and CurInferior > 0 %}
                            <div class="card border border-1 border-secondary" style="min-height: 190px; max-height: 190px;">
                                <button type="button" class="btn btn-outline-dark center position-absolute top-50 start-50 translate-middle"><i class="bi-plus-square-fill fs-2"></i></button> 
                            </div>
                            {% endif %}
                        </div>
                        {% else %}
                        <div class="col bg-white p-1" style="min-height: 200px; max-width: calc(100%/7*{{ Task.Size }});">
                            <div class="card border border-3 border-dark rounded-3" style="min-height: 190px; max-height: 190px;">
                                <span class="bg-{{ Task.Color }} bg-gradient border border-dark border-2" style="min-height: 42px;">
                                    <div class="mx-3 my-1 fs-5 bg-dark bg-gradient text-white text-center rounded-pill">{{ Task.Title }}</div>
                                </span>
                                
                                <div class="overflow-auto p-1 bg-gradient border border-2 border-dark" style="min-height: 110px; background-color: rgb(172, 172, 172);">
                                    <p class="">{{ Task.Description }}</p>
                                </div>

                                <span class="bg-dark bg-gradient border border-dark border-2 p-1 text-white position-relative" style="min-height: 32px;">
                                    {% if Task.Color == 'info' %}{% else %}<i class="bi-exclamation-triangle-fill text-{{ Task.Color }}"></i>{% endif %}
                                    <button type="button" class="btn btn-outline-light px-2 position-absolute top-50 end-0 translate-middle-y" style="max-height: 26px; padding: 0px;" data-bs-toggle="modal" data-bs-target="#exampleModal"><i class="bi-journal-arrow-up"></i></button> 
                                </span>
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>
                    {% endfor %}

                    {% if RightsLevel > 0 %}
                    <div class="card my-1 border border-1 border-secondary" style="min-height: 70px; max-height: 70px;">
                        <button type="button" class="btn btn-outline-dark center position-absolute top-50 start-50 translate-middle"><i class="bi-plus-square-fill fs-2"></i></button> 
                    </div>
                    {% endif %}
                </div>
            </div>

            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-xl modal-dialog-scrollable">
                    <div class="modal-content">
                        <div class="modal-header bg-warning border border-dark border-3">
                            <span class="" style="min-height: 42px; min-width: 100%;">
                                <div class="mx-3 my-1 fs-3 bg-dark bg-gradient text-white text-center rounded-pill">Title card</div>
                            </span>
                        </div>

                        <div class="modal-body border border-dark border-3">
                            <div class="row mx-1">
                                <div class="bg-white overflow-auto border border-secondary rounded-3" style="width: 75%; min-height: 400px; max-height: 400px; float: left; display: flex;">
                                    Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.Some quick example text to build on the card title and make up the bulk of the card's content.
                                </div>

                                <div class="row bg-dark mx-1 card border border-dark border-2" style="width: 23%; min-height: 400px; max-height: 400px; float: right; display: flex;">
                                    <div class="bg-info p-1 border border-dark border-1 text-center" style="min-height: 33%; max-height: 33%; min-width: 100%;">
                                        <div class="align-items-center">
                                            <p class=""><i class="bi-clock-fill fs-4 px-1"></i></p>
                                            <p class="bg-dark bg-gradient text-white rounded-pill fs-5">25.07.2021</p>
                                        </div>
                                    </div>
                                    <div class="bg-danger border border-dark border-1 text-center" style="min-height: 33%; max-height: 33%;">
                                        <p class=""><i class="bi-alarm-fill fs-4 px-1"></i></p>
                                        <p class="bg-dark bg-gradient text-white rounded-pill fs-5">04.08.2021</p>
                                    </div>
                                    <div class="bg-warning border border-dark border-1 text-center" style="min-height: 34%; max-height: 34%;">
                                        <p class=""><i class="bi-person-lines-fill fs-4 px-1"></i></p>
                                        <p class="bg-dark bg-gradient text-white rounded-3">Плющев Иван Петрович</p>
                                    </div>
                                </div>
                            </div>

                            <hr>

                            <div class="">
                                <div class="accordion" id="accordionExample">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="headingOne">
                                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                                <i class="bi-check-square-fill fs-4 px-1"></i>Задание 1
                                            </button>
                                        </h2>
                                        <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#accordionExample">
                                            <div class="accordion-body">
                                                <label for="exampleFormControlTextarea1" class="form-label">Отчет:</label>
                                                <textarea class="form-control my-1" id="exampleFormControlTextarea1" rows="3"></textarea>
                                                <button type="submit" class="btn btn-primary m-1">Прикрепить файл</button>
                                                <button type="submit" class="btn btn-primary m-1">Отправить на верификацию</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="headingTwo">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                                <i class="bi-square fs-4 px-1"></i>Задание 2
                                            </button>
                                        </h2>
                                        <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                            <div class="accordion-body">
                                                <label for="exampleFormControlTextarea1" class="form-label">Отчет:</label>
                                                <textarea class="form-control my-1" id="exampleFormControlTextarea1" rows="3"></textarea>
                                                <button type="submit" class="btn btn-primary m-1">Прикрепить файл</button>
                                                <button type="submit" class="btn btn-primary m-1">Отправить на верификацию</button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header" id="headingThree">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                                <i class="bi-square fs-4 px-1"></i>Задание 3
                                            </button>
                                        </h2>
                                        <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
                                            <div class="accordion-body">
                                                <label for="exampleFormControlTextarea1" class="form-label">Отчет:</label>
                                                <textarea class="form-control my-1" id="exampleFormControlTextarea1" rows="3"></textarea>
                                                <button type="submit" class="btn btn-primary m-1">Прикрепить файл</button>
                                                <button type="submit" class="btn btn-primary m-1">Отправить на верификацию</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <hr>

                            <div class="">
                                <div class="">
                                    <label for="exampleFormControlTextarea1" class="form-label fs-4">Оставить комментарий:</label>
                                    <textarea class="form-control my-1" id="exampleFormControlTextarea1" rows="3"></textarea>
                                    <button type="submit" class="btn btn-primary m-1">Отправить</button>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script type="text/javascript" src="{% static 'jquery-3.6.0.min.js' %}"></script>
            <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
            <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap.bundle.min.js' %}"></script>
            <script type="text/javascript" src="{% static 'gridstrap/jquery.gridstrap.js' %}"></script>
            <script type="text/javascript" src="{% static 'script.js' %}"></script>
        </div>

        </div>
    </body>
</html>